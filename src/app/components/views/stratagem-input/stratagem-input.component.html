<div id="stratagem-input-view">
	<div class="skull-header">
		<img src="/images/skull-header.png" />
		<div
			class="stratagem-code-container"
			(pointerdown)="codeClick()"
			[class.cancel]="getIsDeploying() == false && (getInputMode() != inputMode[0] || getCodeReady() != null)"
			[class.ready]="getIsDeploying() == false && (getInputMode() == inputMode[0] && getCodeReady() == null)"
		>
			<ng-template ngFor [ngForOf]="currentInputCode | async" let-input>
				<div class="stratagem-direction-container">
					<div class="stratagem-direction" [class]="inputDirection[input]">
						<img />
					</div>
				</div>
			</ng-template>
		</div>
	</div>
	<div class="content-container">
		<app-code-list *ngIf="getInputMode() == inputMode[1] && (codeReady | async) == null"></app-code-list>
		<div *ngIf="(codeReady | async) != null" class="deploy-button-container">
			<button id="inputDeploy" class="deploy-button" [class]="getCodeReady()!.colour" (pointerdown)="deploy()" [disabled]="(isDeploying | async) == true">
				<img *ngIf="getCodeReady()!.icon" [src]="getReadyIcon()"/>
				<span>Deploy{{ (isDeploying | async) == true ? 'ing' : '' }} {{ getCodeReady()!.name }}</span>
			</button>
		</div>
		<div class="stratagem-inputs-container" [class.list-position]="getInputMode() == inputMode[1]">
			<button id="inputUp" class="stratagem-input up" (pointerdown)="clickInput(inputDirection.Up)" [disabled]="isInputDisabled | async">
				<img />
			</button>
			<button id="inputLeft" class="stratagem-input left" (pointerdown)="clickInput(inputDirection.Left)" [disabled]="isInputDisabled | async">
				<img />
			</button>
			<button id="inputDown" class="stratagem-input down" (pointerdown)="clickInput(inputDirection.Down)" [disabled]="isInputDisabled | async">
				<img />
			</button>
			<button id="inputRight" class="stratagem-input right" (pointerdown)="clickInput(inputDirection.Right)" [disabled]="isInputDisabled | async">
				<img />
			</button>
		</div>
	</div>
	<div class="battery-container">
		<div class="battery-start"></div>
		<div class="battery-outline">
			<div class="battery-fill"></div>
		</div>
		<div class="battery-end"></div>
	</div>
</div>

<ng-container *ngFor="let stratagemInputBeepNum of [].constructor(stratagemInputBeepPitches); let i = index">
	<audio [id]="'stratagem.input.beep.' + (i + 1)" [src]="'/audio/sounds/stratagem-input-' + (i + 1) + '.ogg'"></audio>
</ng-container>
<audio id="stratagem.input.fail.1" src="/audio/sounds/stratagem-input-fail-1.ogg"></audio>
<audio id="stratagem.input.fail.2" src="/audio/sounds/stratagem-input-fail-2.ogg"></audio>
<audio id="stratagem.input.ready" src="/audio/sounds/stratagem-input-ready-long.ogg"></audio>
<audio id="stratagem.input.deploy" src="/audio/sounds/stratagem-input-deploy.ogg"></audio>